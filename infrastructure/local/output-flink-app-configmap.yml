apiVersion: v1
data:
  flink-conf.yaml: "blob.server.port: 6124\nkubernetes.jobmanager.annotations: prometheus.io/scrape:true,prometheus.io/port:9999\nmetrics.reporter.jmx.port:
    8789\njobmanager.execution.failover-strategy: region\njobmanager.rpc.address:
    flink-cluster.default\nkubernetes.service-account: flink-service-account\nkubernetes.cluster-id:
    flink-cluster\nmetrics.latency.granularity: OPERATOR\nexecution.savepoint.ignore-unclaimed-state:
    false\n$internal.application.program-args: \nkubernetes.container.image: eu.gcr.io/msc-thesis-354309/quickstart:latest\nparallelism.default:
    1\ntaskmanager.numberOfTaskSlots: 1\nmetrics.reporters: prom\nkubernetes.rest-service.exposed.type:
    NodePort\npipeline.classpaths: \nmetrics.reporter.prom.class: org.apache.flink.metrics.prometheus.PrometheusReporter\ntaskmanager.memory.process.size:
    1728m\nmetrics.reporter.prom.port: 9999\nkubernetes.internal.jobmanager.entrypoint.class:
    org.apache.flink.kubernetes.entrypoint.KubernetesApplicationClusterEntrypoint\nexecution.savepoint-restore-mode:
    NO_CLAIM\nexecution.target: kubernetes-application\nmetrics.latency.interval:
    1000\njobmanager.memory.process.size: 1600m\njobmanager.rpc.port: 6123\ntaskmanager.rpc.port:
    6122\nexecution.attached: true\nkubernetes.taskmanager.annotations: prometheus.io/scrape:true,prometheus.io/port:9999\ninternal.cluster.execution-mode:
    NORMAL\nmetrics.reporter.jmx.class: org.apache.flink.metrics.jmx.JMXReporter\nexecution.shutdown-on-attached-exit:
    false\npipeline.jars: local:///opt/flink/usrlib/quickstart-0.1.jar\nrest.address:
    localhost\n"
  log4j-console.properties: |
    ################################################################################
    #  Licensed to the Apache Software Foundation (ASF) under one
    #  or more contributor license agreements.  See the NOTICE file
    #  distributed with this work for additional information
    #  regarding copyright ownership.  The ASF licenses this file
    #  to you under the Apache License, Version 2.0 (the
    #  "License"); you may not use this file except in compliance
    #  with the License.  You may obtain a copy of the License at
    #
    #      http://www.apache.org/licenses/LICENSE-2.0
    #
    #  Unless required by applicable law or agreed to in writing, software
    #  distributed under the License is distributed on an "AS IS" BASIS,
    #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    #  See the License for the specific language governing permissions and
    # limitations under the License.
    ################################################################################

    # Allows this configuration to be modified at runtime. The file will be checked every 30 seconds.
    monitorInterval=30

    # This affects logging for both user code and Flink
    rootLogger.level = INFO
    rootLogger.appenderRef.console.ref = ConsoleAppender
    rootLogger.appenderRef.rolling.ref = RollingFileAppender

    # Uncomment this if you want to _only_ change Flink's logging
    #logger.flink.name = org.apache.flink
    #logger.flink.level = INFO

    # The following lines keep the log level of common libraries/connectors on
    # log level INFO. The root logger does not override this. You have to manually
    # change the log levels here.
    logger.akka.name = akka
    logger.akka.level = INFO
    logger.kafka.name= org.apache.kafka
    logger.kafka.level = INFO
    logger.hadoop.name = org.apache.hadoop
    logger.hadoop.level = INFO
    logger.zookeeper.name = org.apache.zookeeper
    logger.zookeeper.level = INFO
    logger.shaded_zookeeper.name = org.apache.flink.shaded.zookeeper3
    logger.shaded_zookeeper.level = INFO

    # Log all infos to the console
    appender.console.name = ConsoleAppender
    appender.console.type = CONSOLE
    appender.console.layout.type = PatternLayout
    appender.console.layout.pattern = %d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %-60c %x - %m%n

    # Log all infos in the given rolling file
    appender.rolling.name = RollingFileAppender
    appender.rolling.type = RollingFile
    appender.rolling.append = true
    appender.rolling.fileName = ${sys:log.file}
    appender.rolling.filePattern = ${sys:log.file}.%i
    appender.rolling.layout.type = PatternLayout
    appender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %-60c %x - %m%n
    appender.rolling.policies.type = Policies
    appender.rolling.policies.size.type = SizeBasedTriggeringPolicy
    appender.rolling.policies.size.size=100MB
    appender.rolling.policies.startup.type = OnStartupTriggeringPolicy
    appender.rolling.strategy.type = DefaultRolloverStrategy
    appender.rolling.strategy.max = ${env:MAX_LOG_FILE_NUMBER:-10}

    # Suppress the irrelevant (wrong) warnings from the Netty channel handler
    logger.netty.name = org.jboss.netty.channel.DefaultChannelPipeline
    logger.netty.level = OFF
  logback-console.xml: |
    <!--
      ~ Licensed to the Apache Software Foundation (ASF) under one
      ~ or more contributor license agreements.  See the NOTICE file
      ~ distributed with this work for additional information
      ~ regarding copyright ownership.  The ASF licenses this file
      ~ to you under the Apache License, Version 2.0 (the
      ~ "License"); you may not use this file except in compliance
      ~ with the License.  You may obtain a copy of the License at
      ~
      ~     http://www.apache.org/licenses/LICENSE-2.0
      ~
      ~ Unless required by applicable law or agreed to in writing, software
      ~ distributed under the License is distributed on an "AS IS" BASIS,
      ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      ~ See the License for the specific language governing permissions and
      ~ limitations under the License.
      -->

    <configuration>
        <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
            <encoder>
                <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{60} %X{sourceThread} - %msg%n</pattern>
            </encoder>
        </appender>

        <appender name="rolling" class="ch.qos.logback.core.rolling.RollingFileAppender">
            <file>${log.file}</file>
            <append>false</append>

            <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
                <fileNamePattern>${log.file}.%i</fileNamePattern>
                <minIndex>1</minIndex>
                <maxIndex>10</maxIndex>
            </rollingPolicy>

            <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
                <maxFileSize>100MB</maxFileSize>
            </triggeringPolicy>

            <encoder>
                <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{60} %X{sourceThread} - %msg%n</pattern>
            </encoder>
        </appender>

        <!-- This affects logging for both user code and Flink -->
        <root level="INFO">
            <appender-ref ref="console"/>
            <appender-ref ref="rolling"/>
        </root>

        <!-- Uncomment this if you want to only change Flink's logging -->
        <!--<logger name="org.apache.flink" level="INFO"/>-->

        <!-- The following lines keep the log level of common libraries/connectors on
             log level INFO. The root logger does not override this. You have to manually
             change the log levels here. -->
        <logger name="akka" level="INFO"/>
        <logger name="org.apache.kafka" level="INFO"/>
        <logger name="org.apache.hadoop" level="INFO"/>
        <logger name="org.apache.zookeeper" level="INFO"/>

        <!-- Suppress the irrelevant (wrong) warnings from the Netty channel handler -->
        <logger name="org.jboss.netty.channel.DefaultChannelPipeline" level="ERROR"/>
    </configuration>
kind: ConfigMap
metadata:
  creationTimestamp: "2022-08-01T17:35:26Z"
  labels:
    app: flink-cluster
    type: flink-native-kubernetes
  name: flink-config-flink-cluster
  namespace: default
  ownerReferences:
  - apiVersion: apps/v1
    blockOwnerDeletion: true
    controller: true
    kind: Deployment
    name: flink-cluster
    uid: 6bb246b8-89a4-4c58-baac-f78103b38ba3
  resourceVersion: "121032"
  uid: b0d64e18-d423-49ff-b651-839fdf9a1e64
